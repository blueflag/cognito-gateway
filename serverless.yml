#
# @see https://serverless.com/framework/docs/providers/aws/guide/serverless.yml/
#

service: cognito-gateway

provider:
  name: aws
  runtime: nodejs4.3

# Set env variables in the .env file
stage: ${env:SERVERLESS_STAGE}
region: ${env:SERVERLESS_REGION}


# NOTE: This doesn't act quite like serverless, which adds a ** to the start of your globs which
# massively slows down globbing. By default everything is excluded. See ./scripts/bundle.js for details.
package:
  include:
    - node_modules/**
    - dist/**
    - prod.js
    - package.json

functions:
  updateToken:
    handler: ${env:SERVERLESS_STAGE}.updateToken
    events:
      - http:
          path: /updateToken
          method: post

  userGet:
    handler: ${env:SERVERLESS_STAGE}.userGet
    events:
      - http:
          path: /user
          method: get

  userDelete:
    handler: ${env:SERVERLESS_STAGE}.userDelete
    events:
      - http:
          path: /user
          method: delete

  signIn:
    handler: ${env:SERVERLESS_STAGE}.signIn
    events:
      - http:
          path: /signIn
          method: post

  signOutGlobal:
    handler: ${env:SERVERLESS_STAGE}.signOutGlobal
    events:
      - http:
          path: /signOutGlobal
          method: post

  signUp:
    handler: ${env:SERVERLESS_STAGE}.signUp
    events:
      - http:
          path: /signUp
          method: post

  signUpConfirm:
    handler: ${env:SERVERLESS_STAGE}.signUpConfirm
    events:
      - http:
          path: /signUpConfirm
          method: post

  signUpConfirmResend:
    handler: ${env:SERVERLESS_STAGE}.signUpConfirmResend
    events:
      - http:
          path: /signUpConfirmResend
          method: post



#   Add any plugins here
plugins:
  - serverless-offline

